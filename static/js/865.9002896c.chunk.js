"use strict";(self.webpackChunkinstragram=self.webpackChunkinstragram||[]).push([[865,429],{2744:function(e,r,s){s.r(r);s(2791);var t=s(7689),n=s(2222),i=s(2423),l=s(9222),a=s(184);r.default=function(){return l.I8.currentUser?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"w-[100%] flex flex-col  items-center p-8",children:[(0,a.jsx)("h1",{className:" text-2xl",children:"Sorry, this page isn't available."}),(0,a.jsxs)("p",{className:"mt-8",children:["The link you followed may be broken, or the page may have been removed. ",(0,a.jsx)("span",{className:"text-indigo-300",children:"Go back to Instagram."})," "]})]})]}):(0,a.jsx)(t.Fg,{to:i.Z.SIGN_IN})}},9418:function(e,r,s){s.r(r),s.d(r,{default:function(){return w}});var t=s(9439),n=s(2791),i=s(7689),l=s(4892),a=s(4165),c=s(3433),o=s(1413),u=s(5861),d=s(4129),f=s(7562),m=s(7799),x=s(9222),h=function(){var e=(0,l.C)((function(e){return e.anotherUser.user})),r=(0,l.C)((function(e){return e.user.user})),s=(0,l.T)(),t=function(){var t=(0,u.Z)((0,a.Z)().mark((function t(n){var i,l,u,h,p;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.userName,l=n.fullName,u=n.profileImage,h=n.uid,console.log(h),p=r.following.find((function(e){return e.uid===h})),e.uid!==h){t.next=11;break}if(p){t.next=11;break}return s((0,d.av)((0,o.Z)((0,o.Z)({},r),{},{following:[].concat((0,c.Z)(r.following),[{userName:i,fullName:l,profileImage:u,uid:h}])}))),s((0,f.xb)((0,o.Z)((0,o.Z)({},e),{},{followers:[].concat((0,c.Z)(e.followers),[{userName:r.userName,fullName:r.fullName,profileImage:r.profileImage,uid:r.uid}])}))),t.next=9,(0,m.r7)((0,m.JU)(x.db,"users",h),{followers:[].concat((0,c.Z)(e.followers),[{userName:r.userName,fullName:r.fullName,profileImage:r.profileImage,uid:r.uid}])});case 9:return t.next=11,(0,m.r7)((0,m.JU)(x.db,"users",r.uid),{following:[].concat((0,c.Z)(r.following),[{userName:i,fullName:l,profileImage:u,uid:h}])});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=(0,u.Z)((0,a.Z)().mark((function t(n){var i,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.followers.filter((function(e){return e.uid!==r.uid})),l=r.following.filter((function(e){return e.uid!==n})),s((0,d.av)((0,o.Z)((0,o.Z)({},r),{},{following:l}))),s((0,f.xb)((0,o.Z)((0,o.Z)({},e),{},{followers:i}))),t.next=6,(0,m.r7)((0,m.JU)(x.db,"users",r.uid),{following:l});case 6:return t.next=8,(0,m.r7)((0,m.JU)(x.db,"users",n),{followers:i});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{followPerson:t,unFollowPerson:n}},p=s(6881),j=s(184),g=function(e){var r=e.setVisible,s=e.uid,t=e.profileImage,n=h().unFollowPerson;(0,l.C)((function(e){return e.anotherUser.user}));return(0,j.jsxs)("div",{className:"  flex-col items-center text-center rounded-xl bg-white   ",children:[(0,j.jsx)("div",{className:" border-b-2 py-4 px-32",children:(0,j.jsx)("img",{className:"w-20 rounded-full h-20",src:t,alt:"pic"})}),(0,j.jsx)("div",{onClick:function(){r(!1),n(s)},className:"flex justify-start px-4 py-4 hover:bg-gray-100 rounded-xl cursor-pointer",children:(0,j.jsx)("button",{children:"Unfollow"})})]})},v=s(1087),b=s(9554),N=s(8937),w=function(){var e=(0,i.UO)().uid,r=(0,l.C)((function(e){return e.user.user})),s=(0,l.C)((function(e){return e.anotherUser.user})),a=(0,i.TH)(),c=(0,l.C)((function(e){return e.anotherUser.user})),o=(c.email,c.profileImage),u=c.userName,d=c.followers,f=c.following,m=c.posts,x=c.fullName,w=h().followPerson,Z=s.followers.find((function(e){return e.uid===r.uid})),I=(0,n.useState)(!1),k=(0,t.Z)(I,2),y=k[0],U=k[1],C=(0,N.Z)().chatWithUser,S=(0,i.s0)();return(0,j.jsx)("div",{className:"sm:flex bg-gray-50 w-[100%] h-[100vh] sm:w-[90%] md:w-[80%]",children:(0,j.jsxs)("div",{className:" w-[100%] p-4  xl:mx-[20%]",children:[(0,j.jsxs)("div",{className:"flex  justify-center",children:[(0,j.jsx)("div",{className:"mr-8 h-32 w-32 sm:h-40 sm:w-40",children:(0,j.jsx)("img",{className:" rounded-full object-cover  w-[100px] h-[100px]  sm:h-40 sm:w-40    cursor-pointer border-[1px]",src:o||"/Instagram-clone/images/profile.png",alt:""})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"sm:flex-row justify-between w-[50%] sm:w-[100%]  flex flex-col  text-center ",children:[(0,j.jsx)("h1",{className:"text-2xl font-[300]",children:u}),Z?(0,j.jsx)("button",{onClick:function(){return U(!0)},className:"ml-4 bg-zinc-200 p-1 px-3 rounded-md mb-2 ",children:"Following"}):(0,j.jsx)("button",{onClick:function(){return w(s)},className:"ml-4  p-1 px-6 rounded-md text-white  bg-blue-500  mb-2",children:"Follow"}),(0,j.jsx)(p.Z,{visible:y,setVisible:U,children:(0,j.jsx)(g,{profileImage:s.profileImage,setVisible:U,uid:e})}),(0,j.jsx)("button",{className:"ml-4 bg-zinc-200 p-1 px-3 rounded-md mb-2 ",onClick:function(){C(s),S("/direct")},children:"Message"})]}),(0,j.jsxs)("div",{className:"flex  mt-4 mr-12 ",children:[(0,j.jsxs)("h1",{className:"mr-8",children:[m.length," posts"]}),(0,j.jsx)(v.rU,{to:"/".concat(e,"/followers"),state:{background:a},children:(0,j.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[d.length," followers"]})}),(0,j.jsx)(v.rU,{to:"/".concat(e,"/following"),state:{background:a},children:(0,j.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[f.length," following"]})})]}),(0,j.jsxs)("div",{className:"flex flex-col mt-4 mr-[275px]",children:[(0,j.jsx)("h1",{className:"font-bold",children:x}),(0,j.jsx)("p",{children:"About me"})]})]})]}),(0,j.jsxs)("div",{className:"mt-12 border-t-2 flex justify-center",children:[(0,j.jsxs)("button",{className:"mr-10 mt-2 text-[15px] flex items-center",children:[(0,j.jsx)("i",{className:"ri-grid-line mr-1"}),"POSTS"]}),(0,j.jsxs)("button",{className:"ml-10 mt-2 text-[15px] flex items-center",children:[(0,j.jsx)("i",{className:"ri-price-tag-3-line mr-1"}),"TAGGED"]})]}),(0,j.jsx)(b.V,{})]})})}},9554:function(e,r,s){s.d(r,{V:function(){return x}});var t=s(4165),n=s(5861),i=s(9439),l=s(2791),a=s(7689),c=s(9222),o=s(7799),u=s(1087),d=s(2423),f=s(184),m=function(e){var r=e.postImage,s=e.postId,t=e.user,n=(0,l.useState)(!1),o=(0,i.Z)(n,2),m=(o[0],o[1]),x=(0,a.TH)();return c.I8?(0,f.jsx)("div",{className:" bg-black flex items-center justify-center mt-9 w-[90%] m-auto ",children:(0,f.jsx)(u.rU,{to:"/".concat(t,"/").concat(s,"/"),state:{background:x},children:(0,f.jsx)("div",{className:" bg-black w-full sm:h-[250px] h-[100px] flex items-center justify-center ",children:(0,f.jsx)("img",{onClick:function(){return m(!0)},className:"hover:opacity-50 h-full w-full object-cover  ",src:r,alt:"post"})})})}):(0,f.jsx)(a.Fg,{to:d.Z.SIGN_IN})},x=function(){var e=(0,a.UO)().uid,r=(0,l.useState)(),s=(0,i.Z)(r,2),u=s[0],d=s[1],x=null===u||void 0===u?void 0:u.map((function(e){return(0,f.jsx)(m,{postImage:e.postImage,postId:e.postId,user:e.user})}));return(0,l.useEffect)((function(){var r=function(){var r=(0,n.Z)((0,t.Z)().mark((function r(){var s,n,i;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=(0,o.JU)(c.db,"users",e),r.next=3,(0,o.QT)(n);case 3:i=r.sent,d(null===(s=i.data())||void 0===s?void 0:s.posts);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[]),(0,f.jsxs)("div",{className:" grid grid-cols-3 gap-6  mt-2  ",children:[" ",null===x||void 0===x?void 0:x.reverse()," "]})}},984:function(e,r,s){s.r(r),s.d(r,{default:function(){return V}});var t=s(9439),n=s(2791),i=s(7689),l=s(9460),a=s(4892),c=s(1087),o=s(2423),u=s(6881),d=s(4165),f=s(5861),m=s(9274),x=s(184),h=function(e){var r=e.setVisible,s=((0,a.C)((function(e){return e.user.user})),(0,a.T)()),t=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.files[0],e.t0=s,e.next=6,(0,m._)({image:n});case 6:e.t1=e.sent,(0,e.t0)(e.t1),r(!1);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"  flex-col items-center text-center rounded-xl bg-white   ",children:[(0,x.jsx)("div",{className:"border-b-[1px] p-8 flex items-center  justify-center",children:(0,x.jsx)("h1",{className:"font-bold  px-16 cursor-pointer",children:"Change profile photo"})}),(0,x.jsx)("div",{className:"border-b-[1px] p-2 px-8 active:bg-gray-100 ",children:(0,x.jsxs)("label",{className:" font-bold text-blue-400 cursor-pointer w-36 0",children:["Upload photo",(0,x.jsx)("input",{type:"file",className:"hidden  ",onChange:function(e){return t(e)},accept:"image/png, image/gif, image/jpeg"})]})}),(0,x.jsx)("div",{className:"flex items-center justify-center  cursor-pointer active:bg-gray-100 active:rounded-b-xl ",onClick:function(){return r(!1)},children:(0,x.jsx)("h1",{className:" cursor-pointer py-3",children:"Cancel"})})]})},p=s(9554),j=s(7799),g=s(9222),v=function(e){var r=e.postImage,s=e.postId,t=e.user,n=(0,i.TH)();return g.I8?(0,x.jsx)("div",{className:" bg-black flex items-center justify-center mt-9 w-[90%] m-auto ",children:(0,x.jsx)(c.rU,{to:"/".concat(t,"/").concat(s),state:{background:n},children:(0,x.jsx)("div",{className:" bg-black w-full sm:h-[250px] h-[100px] flex items-center justify-center ",children:(0,x.jsx)("img",{className:"hover:opacity-50 h-full w-full object-cover  ",src:r,alt:"post"})})})}):(0,x.jsx)(i.Fg,{to:o.Z.SIGN_IN})},b=function(){var e=(0,n.useState)(),r=(0,t.Z)(e,2),s=r[0],l=r[1],a=(0,i.UO)().uid,c=null===s||void 0===s?void 0:s.map((function(e){return(0,x.jsx)(v,{postImage:e.postImage,postId:e.postId,user:e.user})}));return(0,n.useEffect)((function(){var e=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,s,t;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,j.JU)(g.db,"users",a),e.next=3,(0,j.QT)(s);case 3:t=e.sent,l(null===(r=t.data())||void 0===r?void 0:r.savedPosts);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,x.jsxs)("div",{className:" grid grid-cols-3 gap-6  mt-2  ",children:[" ",null===c||void 0===c?void 0:c.reverse()," "]})},N=(0,n.memo)(b),w=s(3495),Z=function(){var e=(0,l.v0)(),r=((0,a.C)((function(e){return e.user.user})),(0,n.useState)(!1)),s=(0,t.Z)(r,2),d=s[0],f=s[1],m=(0,i.UO)().uid,j=(0,n.useState)(!1),g=(0,t.Z)(j,2),v=g[0],b=g[1],Z=(0,i.TH)(),I=((0,i.s0)(),(0,a.C)((function(e){return e.user.user}))),k=I.userName,y=I.profileImage,U=I.followers,C=I.posts,S=I.following,T=I.fullName;return e?(0,x.jsx)("div",{className:"sm:flex bg-gray-50 w-[100%] sm:w-[90%] md:w-[80%]   ",children:(0,x.jsxs)("div",{className:"   w-[100%] p-4  xl:mx-[20%]  ",children:[(0,x.jsxs)("div",{className:"flex  justify-center ",children:[(0,x.jsx)("div",{className:"w-[30%] flex justify-center ",children:(0,x.jsx)("img",{onClick:function(){return f(!0)},className:"rounded-full object-cover  w-[100px] h-[100px]  sm:h-40 sm:w-40    cursor-pointer border-[1px]",src:y||"/Instagram-clone/images/profile.png",alt:""})}),(0,x.jsx)(u.Z,{visible:d,setVisible:f,children:(0,x.jsx)(h,{setVisible:f})}),(0,x.jsxs)("div",{className:"w-[70%]",children:[(0,x.jsx)("div",{className:"sm:flex-row justify-between w-[50%] sm:w-[100%]  flex flex-col  text-center  ",children:(0,x.jsx)("h1",{className:"text-2xl font-[300]",children:k})}),(0,x.jsxs)("div",{className:"flex  mt-4 mr-12 ",children:[(0,x.jsxs)("h1",{className:"mr-8",children:[C.length," posts"]}),(0,x.jsx)(c.rU,{to:"/".concat(m,"/followers"),state:{background:Z},children:(0,x.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[U.length," followers"]})}),(0,x.jsx)(c.rU,{to:"/".concat(m,"/following"),state:{background:Z},children:(0,x.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[S.length," following"]})})]}),(0,x.jsxs)("div",{className:"flex flex-col mt-4 mr-[275px]",children:[(0,x.jsx)("h1",{className:"font-bold",children:T}),(0,x.jsx)("p",{children:"About me"})]})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"mt-12 border-t-2 flex justify-center",children:[(0,x.jsxs)("button",{onClick:function(){return b(!1),void window.history.replaceState({},"saved","/".concat(m))},className:" ".concat(v?"":"border-t-[1px] border-black"," pt-4 mr-10 border-black text-[15px] flex items-center"),children:[(0,x.jsx)("i",{className:"ri-grid-line mr-1"}),"POSTS"]}),(0,x.jsx)(w.fO,{to:"#saved",children:(0,x.jsxs)("button",{onClick:function(){return b(!0)},className:" ".concat(v?"border-t-[1px] border-black":""," pt-4  border-black text-[15px] flex items-center"),children:[(0,x.jsx)("i",{className:"ri-bookmark-line  mr-1"}),"SAVED"]})}),(0,x.jsxs)("button",{className:"ml-10 pt-4 text-[15px] flex items-center",children:[(0,x.jsx)("i",{className:"ri-price-tag-3-line mr-1"}),"TAGGED"]})]}),(0,x.jsx)("div",{className:"p-2",children:v?(0,x.jsx)(N,{}):(0,x.jsx)(p.V,{})})]})]})}):(0,x.jsx)(i.Fg,{to:o.Z.SIGN_IN})},I=(0,n.memo)(Z),k=s(9418),y=s(2744),U=s(9829),C=s(7562),S=(0,U.hg)("user/fetchAntotherUser",function(){var e=(0,f.Z)((0,d.Z)().mark((function e(r,s){var t,n,i;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.dispatch,e.next=3,(0,j.QT)((0,j.JU)(g.db,"users",r));case 3:n=e.sent,(i=n.data())&&t((0,C.xb)(i));case 6:case"end":return e.stop()}}),e)})));return function(r,s){return e.apply(this,arguments)}}()),T=s(2222),J=function(){var e=(0,i.UO)().uid,r=(0,a.C)((function(e){return e.user.user})),s=(0,a.C)((function(e){return e.anotherUser.user})),l=(0,a.T)(),c=(0,n.useState)(!1),o=(0,t.Z)(c,2);o[0],o[1];return(0,n.useEffect)((function(){r.uid!==e&&l(S(e))}),[e]),r.uid===e?(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"bg-gray-50  flex justify-between",children:[(0,x.jsx)("div",{className:"bg-gray-50 h-[100vh]",children:(0,x.jsx)(T.Z,{})}),(0,x.jsx)(I,{})]})}):(0,x.jsx)(x.Fragment,{children:s.uid===e?(0,x.jsxs)("div",{className:"bg-gray-50  flex justify-between",children:[(0,x.jsx)("div",{children:(0,x.jsx)(T.Z,{})}),(0,x.jsx)(k.default,{})]}):(0,x.jsx)(y.default,{})})},V=(0,n.memo)(J)},8937:function(e,r,s){var t=s(4165),n=s(4942),i=s(5861),l=s(4892),a=s(7799),c=s(9222);r.Z=function(){var e=(0,l.C)((function(e){return e.user.user})),r=function(){var r=(0,i.Z)((0,t.Z)().mark((function r(s){var i,l,o,u,d,f,m,x,h;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=s.uid,l=s.userName,o=s.profileImage,u=e.uid>i?e.uid+i:i+e.uid,d={uid:i,userName:l,profileImage:o},f={uid:e.uid,userName:e.userName,profileImage:e.profileImage},m=(0,a.JU)(c.db,"chat",u),r.next=7,(0,a.QT)(m);case 7:if(r.sent.exists()){r.next=15;break}return r.next=11,(0,a.pl)((0,a.JU)(c.db,"chat",u),{message:[]});case 11:return r.next=13,(0,a.r7)((0,a.JU)(c.db,"chats",e.uid),(x={},(0,n.Z)(x,u+".userInfo",d),(0,n.Z)(x,u+".date",(0,a.Bt)()),x));case 13:return r.next=15,(0,a.r7)((0,a.JU)(c.db,"chats",i),(h={},(0,n.Z)(h,u+".userInfo",f),(0,n.Z)(h,u+".date",(0,a.Bt)()),h));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return{chatWithUser:r}}}}]);
//# sourceMappingURL=865.9002896c.chunk.js.map