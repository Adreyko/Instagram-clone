"use strict";(self.webpackChunkinstragram=self.webpackChunkinstragram||[]).push([[418],{6881:function(e,r,n){var s=n(2791),t=n(184),i=function(e){var r=e.visible,n=e.setVisible,s=e.children;return r?(0,t.jsx)("div",{className:"fixed inset-0 z-10   bg-opacity-30 backdrop-blur-sm flex justify-center items-center bg-gray-500",onClick:function(){return n(!1)},children:(0,t.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:" rounded shadow-sm z-20",children:s})}):null};r.Z=(0,s.memo)(i)},9418:function(e,r,n){n.r(r),n.d(r,{default:function(){return j}});var s=n(9439),t=n(2791),i=n(7689),l=n(4892),o=n(4165),u=n(3433),a=n(1413),c=n(5861),f=n(4129),d=n(7562),m=n(7799),x=n(9222),p=function(){var e=(0,l.C)((function(e){return e.anotherUser.user})),r=(0,l.C)((function(e){return e.user.user})),n=(0,l.T)(),s=function(){var s=(0,c.Z)((0,o.Z)().mark((function s(t){var i,l,c,p,h;return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(i=t.userName,l=t.fullName,c=t.profileImage,p=t.uid,console.log(p),h=r.following.find((function(e){return e.uid===p})),e.uid!==p){s.next=11;break}if(h){s.next=11;break}return n((0,f.av)((0,a.Z)((0,a.Z)({},r),{},{following:[].concat((0,u.Z)(r.following),[{userName:i,fullName:l,profileImage:c,uid:p}])}))),n((0,d.xb)((0,a.Z)((0,a.Z)({},e),{},{followers:[].concat((0,u.Z)(e.followers),[{userName:r.userName,fullName:r.fullName,profileImage:r.profileImage,uid:r.uid}])}))),s.next=9,(0,m.r7)((0,m.JU)(x.db,"users",p),{followers:[].concat((0,u.Z)(e.followers),[{userName:r.userName,fullName:r.fullName,profileImage:r.profileImage,uid:r.uid}])});case 9:return s.next=11,(0,m.r7)((0,m.JU)(x.db,"users",r.uid),{following:[].concat((0,u.Z)(r.following),[{userName:i,fullName:l,profileImage:c,uid:p}])});case 11:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),t=function(){var s=(0,c.Z)((0,o.Z)().mark((function s(t){var i,l;return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=e.followers.filter((function(e){return e.uid!==r.uid})),l=r.following.filter((function(e){return e.uid!==t})),n((0,f.av)((0,a.Z)((0,a.Z)({},r),{},{following:l}))),n((0,d.xb)((0,a.Z)((0,a.Z)({},e),{},{followers:i}))),s.next=6,(0,m.r7)((0,m.JU)(x.db,"users",r.uid),{following:l});case 6:return s.next=8,(0,m.r7)((0,m.JU)(x.db,"users",t),{followers:i});case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return{followPerson:s,unFollowPerson:t}},h=n(6881),g=n(184),b=function(e){var r=e.setVisible,n=e.uid,s=e.profileImage,t=p().unFollowPerson;(0,l.C)((function(e){return e.anotherUser.user}));return(0,g.jsxs)("div",{className:"  flex-col items-center text-center rounded-xl bg-white   ",children:[(0,g.jsx)("div",{className:" border-b-2 py-4 px-32",children:(0,g.jsx)("img",{className:"w-20 rounded-full h-20",src:s,alt:"pic"})}),(0,g.jsx)("div",{onClick:function(){r(!1),t(n)},className:"flex justify-start px-4 py-4 hover:bg-gray-100 rounded-xl cursor-pointer",children:(0,g.jsx)("button",{children:"Unfollow"})})]})},w=n(1087),v=n(9554),N=n(8937),j=function(){var e=(0,i.UO)().uid,r=(0,l.C)((function(e){return e.user.user})),n=(0,l.C)((function(e){return e.anotherUser.user})),o=(0,i.TH)(),u=(0,l.C)((function(e){return e.anotherUser.user})),a=(u.email,u.profileImage),c=u.userName,f=u.followers,d=u.following,m=u.posts,x=u.fullName,j=p().followPerson,Z=n.followers.find((function(e){return e.uid===r.uid})),I=(0,t.useState)(!1),k=(0,s.Z)(I,2),U=k[0],y=k[1],C=(0,N.Z)().chatWithUser,J=(0,i.s0)();return(0,g.jsx)("div",{className:"sm:flex bg-gray-50 w-[100%] h-[100vh] sm:w-[90%] md:w-[80%]",children:(0,g.jsxs)("div",{className:" w-[100%] p-4  xl:mx-[20%]",children:[(0,g.jsxs)("div",{className:"flex  justify-center",children:[(0,g.jsx)("div",{className:"mr-8 h-32 w-32 sm:h-40 sm:w-40",children:(0,g.jsx)("img",{className:" rounded-full object-cover  w-[100px] h-[100px]  sm:h-40 sm:w-40    cursor-pointer border-[1px]",src:a||"/Instagram-clone/images/profile.png",alt:""})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"sm:flex-row justify-between w-[50%] sm:w-[100%]  flex flex-col  text-center ",children:[(0,g.jsx)("h1",{className:"text-2xl font-[300]",children:c}),Z?(0,g.jsx)("button",{onClick:function(){return y(!0)},className:"ml-4 bg-zinc-200 p-1 px-3 rounded-md mb-2 ",children:"Following"}):(0,g.jsx)("button",{onClick:function(){return j(n)},className:"ml-4  p-1 px-6 rounded-md text-white  bg-blue-500  mb-2",children:"Follow"}),(0,g.jsx)(h.Z,{visible:U,setVisible:y,children:(0,g.jsx)(b,{profileImage:n.profileImage,setVisible:y,uid:e})}),(0,g.jsx)("button",{className:"ml-4 bg-zinc-200 p-1 px-3 rounded-md mb-2 ",onClick:function(){C(n),J("/direct")},children:"Message"})]}),(0,g.jsxs)("div",{className:"flex  mt-4 mr-12 ",children:[(0,g.jsxs)("h1",{className:"mr-8",children:[m.length," posts"]}),(0,g.jsx)(w.rU,{to:"/".concat(e,"/followers"),state:{background:o},children:(0,g.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[f.length," followers"]})}),(0,g.jsx)(w.rU,{to:"/".concat(e,"/following"),state:{background:o},children:(0,g.jsxs)("h1",{className:"mr-8 cursor-pointer",children:[d.length," following"]})})]}),(0,g.jsxs)("div",{className:"flex flex-col mt-4 mr-[275px]",children:[(0,g.jsx)("h1",{className:"font-bold",children:x}),(0,g.jsx)("p",{children:"About me"})]})]})]}),(0,g.jsxs)("div",{className:"mt-12 border-t-2 flex justify-center",children:[(0,g.jsxs)("button",{className:"mr-10 mt-2 text-[15px] flex items-center",children:[(0,g.jsx)("i",{className:"ri-grid-line mr-1"}),"POSTS"]}),(0,g.jsxs)("button",{className:"ml-10 mt-2 text-[15px] flex items-center",children:[(0,g.jsx)("i",{className:"ri-price-tag-3-line mr-1"}),"TAGGED"]})]}),(0,g.jsx)(v.V,{})]})})}},9554:function(e,r,n){n.d(r,{V:function(){return x}});var s=n(4165),t=n(5861),i=n(9439),l=n(2791),o=n(7689),u=n(9222),a=n(7799),c=n(1087),f=n(2423),d=n(184),m=function(e){var r=e.postImage,n=e.postId,s=e.user,t=(0,l.useState)(!1),a=(0,i.Z)(t,2),m=(a[0],a[1]),x=(0,o.TH)();return u.I8?(0,d.jsx)("div",{className:" bg-black flex items-center justify-center mt-9 w-[90%] m-auto ",children:(0,d.jsx)(c.rU,{to:"/".concat(s,"/").concat(n,"/"),state:{background:x},children:(0,d.jsx)("div",{className:" bg-black w-full sm:h-[250px] h-[100px] flex items-center justify-center ",children:(0,d.jsx)("img",{onClick:function(){return m(!0)},className:"hover:opacity-50 h-full w-full object-cover  ",src:r,alt:"post"})})})}):(0,d.jsx)(o.Fg,{to:f.Z.SIGN_IN})},x=function(){var e=(0,o.UO)().uid,r=(0,l.useState)(),n=(0,i.Z)(r,2),c=n[0],f=n[1],x=null===c||void 0===c?void 0:c.map((function(e){return(0,d.jsx)(m,{postImage:e.postImage,postId:e.postId,user:e.user})}));return(0,l.useEffect)((function(){var r=function(){var r=(0,t.Z)((0,s.Z)().mark((function r(){var n,t,i;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,a.JU)(u.db,"users",e),r.next=3,(0,a.QT)(t);case 3:i=r.sent,f(null===(n=i.data())||void 0===n?void 0:n.posts);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[]),(0,d.jsxs)("div",{className:" grid grid-cols-3 gap-6  mt-2  ",children:[" ",null===x||void 0===x?void 0:x.reverse()," "]})}},8937:function(e,r,n){var s=n(4165),t=n(4942),i=n(5861),l=n(4892),o=n(7799),u=n(9222);r.Z=function(){var e=(0,l.C)((function(e){return e.user.user})),r=function(){var r=(0,i.Z)((0,s.Z)().mark((function r(n){var i,l,a,c,f,d,m,x,p;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.uid,l=n.userName,a=n.profileImage,c=e.uid>i?e.uid+i:i+e.uid,f={uid:i,userName:l,profileImage:a},d={uid:e.uid,userName:e.userName,profileImage:e.profileImage},m=(0,o.JU)(u.db,"chat",c),r.next=7,(0,o.QT)(m);case 7:if(r.sent.exists()){r.next=15;break}return r.next=11,(0,o.pl)((0,o.JU)(u.db,"chat",c),{message:[]});case 11:return r.next=13,(0,o.r7)((0,o.JU)(u.db,"chats",e.uid),(x={},(0,t.Z)(x,c+".userInfo",f),(0,t.Z)(x,c+".date",(0,o.Bt)()),x));case 13:return r.next=15,(0,o.r7)((0,o.JU)(u.db,"chats",i),(p={},(0,t.Z)(p,c+".userInfo",d),(0,t.Z)(p,c+".date",(0,o.Bt)()),p));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return{chatWithUser:r}}}}]);
//# sourceMappingURL=418.a2b7ef2d.chunk.js.map